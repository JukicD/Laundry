<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile" xmlns:ui="http://java.sun.com/jsf/facelets">



<f:view renderKitId="PRIMEFACES_MOBILE" />


<h:head>

</h:head>

<h:body>
    <pm:page id="first">
        <pm:content>
            <pm:header title="Mitarbeiter auswählen"/>
            <h:form>
                <p:dataGrid id="workers" var="worker" value="#{workerController.workers}" columns="3">
                    <p:commandButton value="#{worker.firstName}" style="font-size: 200%" action="#{mobileController.goTo('pm:second?transition=slide')}">
                        <p:ajax event="click" listener="#{mobileController.setWorker(worker)}" update="second"/>
                    </p:commandButton>
                </p:dataGrid>
            </h:form>
        </pm:content>
    </pm:page>

    <pm:page id="second">

        <pm:header title="Firma auswählen" fixed="true">
            <pm:content>
                <h:form id="inputForm">
                    <p:inputText id="customerSearch" placeholder="Schnellsuche" type="search" value="#{customerAutoCompleteFilter.query}">
                        <p:ajax event="keyup" listener="#{customerAutoCompleteFilter.init}" update="second:outputForm:outputCustomers"/>
                    </p:inputText>
                </h:form>
            </pm:content>

            <p:separator/>
        </pm:header>
        <pm:content>
            <h:form id="outputForm">
                <p:dataGrid id="outputCustomers" var="customer" value="#{customerAutoCompleteFilter.customers}" columns="3">
                    <p:commandButton value="#{customer.name}" style="font-size: 150%" action="#{mobileController.goTo('pm:third?transition=slide')}" update="third">
                        <p:ajax event="click" listener="#{mobileController.setCustomer(customer)}"/>
                    </p:commandButton>
                </p:dataGrid>
            </h:form>
        </pm:content>
        <pm:footer fixed="true">
            <p:separator/>
            <h:form>
                <p:tabMenu>
                    <p:menuitem value="Zurück" icon="ui-icon-back" outcome="pm:first?transition=fade" iconPos="bottom" />
                    <p:menuitem value="Neuer Kunde" icon="ui-icon-plus" outcome="pm:createCustomer?transition=flip" iconPos="bottom"/>
                    <p:menuitem value="Reset" icon="ui-icon-refresh" action="#{customerAutoCompleteFilter.reset}" iconPos="bottom" update="second:outputForm:outputCustomers second:inputForm:customerSearch">
                    </p:menuitem>
                </p:tabMenu>
            </h:form>

        </pm:footer>

    </pm:page>
    <pm:page id="third">
        <pm:content>
            <pm:header title="Art des Artikels" style="font-size: 200%"/>
            <h:form>
                <p:panelGrid columns="2" style="margin-bottom: 17.5%; margin-top: 17.5%">
                    <p:commandButton value="Leihwäsche" style="font-size: 200%" action="#{mobileController.goTo('pm:fourth?transition=slide')}">
                        <p:ajax event="click" listener="#{mobileController.setBorrowed(true)}" update="fourth"/>
                    </p:commandButton>
                    <p:commandButton value="Eigenwäsche" style="font-size: 200%" action="#{mobileController.goTo('pm:fourth?transition=slide')}">
                        <p:ajax event="click" listener="#{mobileController.setBorrowed(false)}" update="fourth"/>
                    </p:commandButton>
                </p:panelGrid>
            </h:form>
        </pm:content>

    </pm:page>
    <pm:page id="fourth">
        <pm:content>
            <pm:header title="Artikel auswählen">
                <h:form id="inputItem">
                    <p:inputText id="itemSearch" placeholder="Bezeichnung eingeben" type="search" value="#{mobileAutoCompleteFilter.queryItems}">
                        <p:ajax event="keyup" listener="#{mobileAutoCompleteFilter.filterItems(mobileController.customer)}" update="fourth:outputItem:outputItems" process="@form"/>
                    </p:inputText>
                </h:form>
                <p:separator/>
            </pm:header>

            <h:form id="outputItem">
                <p:dataGrid id="outputItems" var="item" value="#{mobileAutoCompleteFilter.queryItems == null || mobileAutoCompleteFilter.queryItems.equals('') ? mobileAutoCompleteFilter.items : mobileAutoCompleteFilter.filteredItems}" columns="3">
                    <p:commandButton value="#{item.item_product.name}" style="font-size: 200%" action="#{mobileNavigationController.goTo('pm:third?transition=slide')}"/>
                </p:dataGrid>
            </h:form>
        </pm:content>
        <pm:footer fixed="true">
            <h:form>
                <p:tabMenu>
                    <p:menuitem value="Zurück" icon="ui-icon-back" outcome="pm:second?transition=fade" iconPos="bottom" />
                    <p:menuitem value="Neue Ware" icon="ui-icon-plus" outcome="pm:createItem?transition=flip" iconPos="bottom"/>
                    <p:menuitem value="Reset" icon="ui-icon-refresh" action="#{mobileAutoCompleteFilter.reset}" iconPos="bottom"/>
                </p:tabMenu>
            </h:form>

        </pm:footer>
    </pm:page>

    <pm:page id="fifth">
        <pm:content>
            <pm:field>
                <h:form>
                    <p:outputLabel for="inputAmount" value="Stück"/>
                    <h:inputText id="inputAmount" value="#{mobileController.amount}"/>
                </h:form>
            </pm:field>
        </pm:content>
    </pm:page>

    <pm:page id="createCustomer">
        <pm:content>
            <h:form>
                <pm:field>
                    <p:outputLabel id="label" for="name" value="Kunde:"/>
                    <p:inputText id="name" value="#{mobileCustomerController.customer.name}" required="true" requiredMessage="Name eingeben!"/>
                </pm:field>
                <p:commandButton value="Erstellen" action="#{mobileCustomerController.createCustomer}" update="second">

                </p:commandButton>
            </h:form>
        </pm:content>
    </pm:page>
</h:body>

</html>